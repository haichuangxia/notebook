# UDP实现拥塞控制

## 拥塞控制机制

### 拥塞控制和流量控制的区别

流量控制:作用于接收者,控制发送者速率,使得接收者来得及接收

拥塞控制:作用于网络,防止过多数据注入网络,避免网络出现负载过大的情况

流量控制:接收方向发送方告知自己可用的缓冲区大小

拥塞控制:由网络状况决定窗口的大小(TCP首部中,窗口字段用来表示窗口大小信息)

也就是说,实际的窗口大小,小于拥塞窗口和滑动窗口的最小值.

### 拥塞控制算法

#### 需要解决的问题

1. 如何判定是否发生了拥塞
2. 发生了拥塞怎么办

#### reno算法

- slow start

- congestion avoidance

- fast retransmit

- fast recovery


算法的实现:

| 变量                         | 实现                   |
| ---------------------------- | ---------------------- |
| 初始拥塞窗口cwnd             | 缓冲的大小             |
| 慢开始门限(状态变量)ssthresh | 多少个MSS              |
| 窗口增加值                   | 可以新增加多大的缓冲区 |

## 基于UDP实现拥塞控制

### 需要解决的问题

问题|解决方案
RTO测量|使用ack,记录时间
接收方窗口rwnd|接收方缓冲-已占用缓冲
发送窗口|socket缓冲区

### 思路

1. 每次发现有rwnd或cwnd发生变化时,改变缓冲区大小
2. 确认机制:ACK机制,捎带应答,还是看quic的拥塞控制算法

