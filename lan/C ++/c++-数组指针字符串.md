# 数组

使用数组名作为函数参数

将数组首地址作为实参进行传递

定义对象数组时,会调用默认的构造函数进行初始化



 数组名做实参,实际就是数组首地址作实参,形参需要用指针.此时就需要使用指针访问数组元素.如果要用数组作为实参,定义函数时,其形参需要使用指针.

# 指针

## 指针常量与指向常量的指针

只读指针--指向常量的指针

通过
``` c++
int a;
const int* p1=&a;
int* const p2=&a;
```
方式,虽然a为变量,p1也是变量,但是不能通过p1修改变量a的值.
p2是常量,但是可以p2修改a的值.

const在谁前面表示谁是常量

## 指针的算数运算
+1,-1表示前一个或者后一个完整数据的位置.(具体看)

当指针指向连续存储的同类型数据时,指针与整数的算数运算和自增自减才有意义

![image-20221205190358347](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205190359.png)

# 与数组有关的指针应用

## 指针数组

使用多态的时候,还是需要使用指针的.

``` c++
Point *pa[2];
```

有`[]`表明首先是一个数组,`Point *`表示数据元素类型是一个`Point`类型的指针

![image-20221205192711291](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205192712.png)

考虑一个情况,一个矩阵,行经常发生交换.此时定义一个一维的指针数组,要交换两行只需要交换指针数组对应位置的元素就可.

## 指向数组的指针

![image-20221205191307844](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205191309.png)

定义一个指针,来指向一个数组.



能不用指针最好不用指针

## 函数,对象有关的指针应用

### 指针作为函数参数

当引用和指针都能作为参数时,优先选择引用

以指针作为函数参数的两种情况

![image-20221205193016964](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205193018.png)

### 指针作为函数返回值

错误的使用

![image-20221205194211211](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205194212.png)

不要返回非静态,非全局的变量地址作为指针.如果变量销毁了,那么返回的地址就全无意义.

正确例子:返回的指针在主函数中一定有效



new得到的,不用的时候需要用delete手动删除.如果程序一直执行,只new不delete,迟早崩溃



### 函数指针

指针指向的对象可以是函数,因为存储程序,指针指向内存中,存储程序入口的地址,是函数代码的首地址.

函数指针是c语言中实现函数回调的方法.复杂函数时,建议使用函数对象进行回调.

![image-20221205204851752](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205204853.png)

使用函数指针实现函数回调的实例:
函数回调:定义的时候,并不知道后面使用哪个具体的函数
 ![image-20221205205127506](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205205128.png)
![image-20221205205205827](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205205207.png)

delete会释放掉通过new申请来的内存空间

![image-20221205210922682](https://qingbin.oss-cn-chengdu.aliyuncs.com/img/2022/20221205210924.png)

# 动态内存分配

一般来说,构造函数中申请内存(new),在析构函数中释放内存(delete)

vector:就是一个封装好的动态数组,可以检查越界等
